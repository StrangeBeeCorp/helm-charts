{{ if eq .Values.CortexStorageClass.cloud "google" }}
#==================                             =======================#
#==================       Google Provisioner    =======================#
#==================                             =======================#
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: {{ .Values.CortexStorageClass.name }}
  namespace: {{ .Release.Namespace }}
provisioner: kubernetes.io/gce-pd         
volumeBindingMode: Immediate
allowVolumeExpansion: true
reclaimPolicy: {{ .Values.CortexStorageClass.reclaimPolicy }}
parameters:
  type: pd-standard
  fstype: ext4
  replication-type: none
--- 
{{ else if eq .Values.CortexStorageClass.cloud "local" }}
#==================                             =======================#
#==================       Local Provisioner     =======================#
#==================                             =======================#
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: {{ .Values.CortexStorageClass.name }}
  namespace: {{ .Release.Namespace }}
provisioner: kubernetes.io/no-provisioner
volumeBindingMode: WaitForFirstConsumer
allowVolumeExpansion: true
reclaimPolicy: {{ .Values.CortexStorageClass.reclaimPolicy }}
# parameters:
#   type: pd-standard
#   fstype: ext4
#   replication-type: none
---
{{ else if eq .Values.CortexStorageClass.cloud "azure"}}
#==================                             =======================#
#==================       Azure Provisioner     =======================#
#==================                             =======================#
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: {{ .Values.CortexStorageClass.name }}
  namespace: {{ .Release.Namespace }}
provisioner: kubernetes.io/azure-disk
parameters:
  storageaccounttype: Standard_LRS
  kind: managed
---
{{ else if eq .Values.CortexStorageClass.cloud "aws" }}
#==================                             =======================#
#==================       AWS Provisioner       =======================#
#==================                             =======================#
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: {{ .Values.CortexStorageClass.name }}
  namespace: {{ .Release.Namespace }}
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp2
reclaimPolicy: {{ .Values.CortexStorageClass.reclaimPolicy }}
allowVolumeExpansion: true
mountOptions:
  - debug
volumeBindingMode: Immediate
{{ end }}